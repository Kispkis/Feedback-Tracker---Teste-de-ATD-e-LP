<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Satisfa칞칚o - Quiosque</title>
    <!-- Estilos espec칤ficos para a interface de quiosque -->
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body class="kiosk">

    <!-- Bot칫es grandes para f치cil intera칞칚o t치til no quiosque -->
    <div class="kiosk-btn green" onclick="send('Muito satisfeito')">游땏<span>Muito satisfeito</span></div>
    <div class="kiosk-btn yellow" onclick="send('Satisfeito')">游뗵<span>Satisfeito</span></div>
    <div class="kiosk-btn red" onclick="send('Insatisfeito')">游<span>Insatisfeito</span></div>

    <!-- Div para exibi칞칚o de mensagens de confirma칞칚o tempor치rias -->
    <div id="msg"></div>

    <script>
    let canClick = true; // Impede registos duplos acidentais

    /**
     * Envia o feedback selecionado para o servidor.
     * @param {string} v - O n칤vel de satisfa칞칚o selecionado.
     */
    function send(v){
        if(!canClick) return; 
        canClick = false; 

        // Comunica칞칚o ass칤ncrona com o servidor Flask
        fetch("/submit", {
            method: "POST",
            headers: {
                "Content-Type": "application/x-www-form-urlencoded;charset=UTF-8"
            },
            body: "satisfacao=" + encodeURIComponent(v)
        })
        .then(response => {
            if(response.ok){
                // Feedback visual de sucesso para o cliente
                const msg = document.getElementById("msg");
                msg.innerText = "Muito obrigado pela sua opini칚o!";
                msg.classList.add("show");

                // Remove a mensagem e desbloqueia ap칩s 2 segundos
                setTimeout(()=>{
                    msg.classList.remove("show");
                    canClick = true; 
                }, 2000);
            } else {
                console.error("Erro ao enviar feedback");
                canClick = true; 
            }
        })
        .catch(err => {
            console.error("Erro na liga칞칚o:", err);
            canClick = true; 
        });
    }
    </script>

</body>
</html>
